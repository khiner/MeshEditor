bindings:
  - name: SceneViewUBO
    kind: Uniform
  - name: ViewportThemeUBO
    kind: Uniform
  - name: Image
    kind: Image
  - name: Sampler
    kind: Sampler
  - name: VertexBuffer
    kind: Buffer
  - name: IndexBuffer
    kind: Buffer
  - name: ModelBuffer
    kind: Buffer
  - name: Buffer
    kind: Buffer
  - name: ObjectIdBuffer
    kind: Buffer
  - name: FaceNormalBuffer
    kind: Buffer
  - name: DrawDataBuffer
    kind: Buffer
  - name: InstanceStateBuffer
    kind: Buffer
  - name: BoneDeformBuffer
    kind: Buffer
  - name: ArmatureDeformBuffer
    kind: Buffer

structs:
  - name: SlotOffset
    fields:
      - name: Slot
        type: u32
        default: InvalidSlot
      - name: Offset
        type: u32
  - name: DrawData
    fields:
      - name: VertexSlot
        type: u32
        default: InvalidSlot
      - name: Index
        type: SlotOffset
      - name: ModelSlot
        type: u32
        default: InvalidSlot
      - name: FirstInstance
        type: u32
      - name: ObjectIdSlot
        type: u32
        default: InvalidSlot
      - name: FaceNormal
        type: SlotOffset
      - name: FaceIdOffset
        type: u32
      - name: VertexCountOrHeadImageSlot
        type: u32
      - name: ElementIdOffset
        type: u32
      - name: ElementState
        type: SlotOffset
      - name: InstanceState
        type: SlotOffset
      - name: PendingLocalTransform
        type: SlotOffset
      - name: VertexOffset
        type: u32
      - name: BoneDeform
        type: SlotOffset
      - name: ArmatureDeform
        type: SlotOffset
  - name: SceneViewUBO
    binding: SceneViewUBO
    fields:
      - name: ViewProj
        type: mat4
        default: 1
      - name: CameraPosition
        type: vec3
      - name: CameraNear
        type: float
      - name: CameraFar
        type: float
      - name: ViewColor
        type: vec3
      - name: AmbientIntensity
        type: float
      - name: DirectionalColor
        type: vec3
      - name: DirectionalIntensity
        type: float
      - name: LightDirection
        type: vec3
      - name: InteractionMode
        type: u32
      - name: EditElement
        type: u32
      - name: IsTransforming
        type: u32
      - name: PendingTransform
        type: mat4
        default: 1
  - name: ViewportThemeColors # Mirrors Blender: Preferences -> Themes -> 3D Viewport -> ...
    fields:
      - name: Wire # Wire
        type: vec3
      - name: WireEdit # Wire Edit
        type: vec3
      - name: ObjectActive # Active Object
        type: vec3
      - name: ObjectSelected # Object Selected
        type: vec3
      - name: Vertex # Vertex
        type: vec3
      - name: VertexSelected # Vertex Select
        type: vec3
      - name: EdgeSelectedIncidental # Edge Selection
        type: vec3
      - name: EdgeSelected # Edge Mode Selection
        type: vec3
      - name: FaceSelectedIncidental # Face Selection
        type: vec4
      - name: FaceSelected # Face Mode Selection
        type: vec4
      - name: ElementActive # Active Vertex/Edge/Face
        type: vec4
      - name: FaceNormal # Face Normal
        type: vec3
      - name: VertexNormal # Vertex Normal
        type: vec3
      - name: Transform # Transform
        type: vec3
  - name: ViewportTheme
    binding: ViewportThemeUBO
    fields:
      - name: Colors
        type: ViewportThemeColors
      - name: SilhouetteEdgeWidth
        type: u32
  - name: Vertex
    fields:
      - name: Position
        type: vec3
      - name: Normal
        type: vec3
  - name: BoneDeformVertex
    fields:
      - name: Joints
        type: uvec4
      - name: Weights
        type: vec4
  - name: WorldMatrix
    fields:
      - name: M
        type: mat4
      - name: MInv
        type: mat4
  - name: SelectionNode
    fields:
      - name: Depth
        type: float
      - name: Id
        type: u32
      - name: Next
        type: u32
  - name: SelectionCounters
    fields:
      - name: Count
        type: u32
      - name: Overflow
        type: u32
  - name: ClickHit
    fields:
      - name: Depth
        type: float
      - name: Id
        type: u32
  - name: ClickResult
    fields:
      - name: Count
        type: u32
      - name: Hits
        type: ClickHit[64]
  - name: ClickElementCandidate
    fields:
      - name: Id
        type: u32
      - name: Depth
        type: float
      - name: DistanceSq
        type: u32
  - name: DrawPassPushConstants
    push_constant: true
    fields:
      - name: DrawData
        type: SlotOffset
      - name: TransformVertexStateSlot
        type: u32
        default: InvalidSlot
      - name: SelectionHeadImageSlot
        type: u32
        default: InvalidSlot
      - name: SelectionNodesSlot
        type: u32
        default: InvalidSlot
      - name: SelectionCounterSlot
        type: u32
        default: InvalidSlot
  - name: ClickSelectPushConstants
    push_constant: true
    fields:
      - name: TargetPx
        type: uvec2
      - name: HeadImageIndex
        type: u32
      - name: SelectionNodesIndex
        type: u32
      - name: ClickResultIndex
        type: u32
  - name: ClickSelectElementPushConstants
    push_constant: true
    fields:
      - name: TargetPx
        type: uvec2
      - name: Radius
        type: u32
      - name: HeadImageIndex
        type: u32
      - name: SelectionNodesIndex
        type: u32
      - name: ClickResultIndex
        type: u32
  - name: BoxSelectPushConstants
    push_constant: true
    fields:
      - name: BoxMin
        type: uvec2
      - name: BoxMax
        type: uvec2
      - name: MaxId
        type: u32
      - name: HeadImageIndex
        type: u32
      - name: SelectionNodesIndex
        type: u32
      - name: BoxResultIndex
        type: u32
      - name: XRay
        type: u32
  - name: SilhouetteEdgeDepthObjectPushConstants
    push_constant: true
    fields:
      - name: SilhouetteSamplerIndex
        type: u32
  - name: SilhouetteEdgeColorPushConstants
    push_constant: true
    fields:
      - name: Manipulating
        type: u32
      - name: ObjectSamplerIndex
        type: u32
      - name: ActiveObjectId
        type: u32
